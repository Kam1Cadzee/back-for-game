# Migration `20200612014322-add-test-role`

This migration has been generated by Vadim Vereketa at 6/12/2020, 1:43:22 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TYPE "Role" ADD VALUE 'TEST'

CREATE TABLE "public"."SettingRole" (
"id" SERIAL,"name" text  NOT NULL ,"role" "Role" NOT NULL ,"value" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Entity" ADD COLUMN "isCreate" boolean  NOT NULL DEFAULT false;

ALTER TABLE "public"."MobileApp" ALTER COLUMN "status" SET DEFAULT 'WORK';

ALTER TABLE "public"."Translate" ALTER COLUMN "type" SET DEFAULT 'OTHER';

ALTER TABLE "public"."User" ADD COLUMN "countQuery" integer  NOT NULL DEFAULT 0,
ALTER COLUMN "role" SET DEFAULT 'STANDARD';

ALTER TABLE "public"."Word" ALTER COLUMN "type" SET DEFAULT 'OTHER';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200604235714-multi..20200612014322-add-test-role
--- datamodel.dml
+++ datamodel.dml
@@ -8,21 +8,22 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model User {
-  createdAt DateTime @default(now())
-  email     String   @default("") @unique
-  id        Int      @default(autoincrement()) @id
-  name      String   @default("")
-  lastName  String   @default("")
-  password  String   @default("")
-  entities  Entity[]
-  role      Role     @default(STANDARD)
-  Word      Word[]
+  createdAt  DateTime @default(now())
+  email      String   @default("") @unique
+  id         Int      @default(autoincrement()) @id
+  name       String   @default("")
+  lastName   String   @default("")
+  password   String   @default("")
+  entities   Entity[]
+  role       Role     @default(STANDARD)
+  Word       Word[]
+  countQuery Int      @default(0)
 }
 model PartOfSpeechDesc {
   id   Int          @default(autoincrement()) @id
@@ -31,10 +32,18 @@
   ua   String
   en   String
 }
+model SettingRole {
+  id    Int    @default(autoincrement()) @id
+  role  Role
+  name  String
+  value String
+}
+
 enum Role {
   ADMIN
+  TEST
   STANDARD
 }
 enum PartOfSpeech {
@@ -72,8 +81,9 @@
   isNeededEdit Boolean    @default(false)
   createdAt    DateTime   @default(now())
   updatedAt    DateTime   @default(now())
   @@unique([title, userId], name: "unique_title_userId")
+  isCreate Boolean @default(false)
   disconnectWords     Word[]     @relation("disconnectEntities")
   disconnectPhrases   Phrase[]   @relation("disconnectPhrases")
   disconnectSentences Sentence[] @relation("disconnectSentences")
```


